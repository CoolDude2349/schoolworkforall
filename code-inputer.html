<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Load It</title><style>body,html{margin:0;padding:0;height:100%;width:100%;overflow:hidden}.textbox{font-size:1px}.button{background-color:#04aa6d;border:none;color:#fff;text-align:center;padding:50px 100px;display:inline-block}</style><input class=textbox id=textbox> <button class=button onclick=getHtml()>Click me</button><script>// IndexedDB script.
     
        let db,html='<!doctype html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <title>Loaded HTML</title>\n    <style>\n        body, html {\n            margin: 0;\n            padding: 0;\n            height: 100%;\n            width: 100%;\n            overflow: hidden;\n        }\n        .textbox {\n            font-size: 1px;\n        }\n        .button {\n            background-color: #04AA6D;\n            border: none;\n            color: white;\n            text-align: center;\n            padding: 50px 100px;\n            display: inline-block;\n        }\n    </style>\n</head>\n<body>\n    <input class="textbox" id="textbox">\n    <button class="button" onclick="getHtml()">Click me</button>\n    <script>\n        function getHtml() {\n            let html = document.getElementById("textbox").value;\n            const doc = document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n        }\n    <\/script>\n</body>\n</html>';const request=indexedDB.open("htmlCacheDB",1);function cacheHTMLWithIndexedDB(e,n){const t=db.transaction("htmlFiles","readwrite");t.objectStore("htmlFiles").put(n,e),t.oncomplete=function(){console.log("HTML content cached in IndexedDB.")},t.onerror=function(e){console.error("Error caching HTML:",e.target.error)}}function getHtml(){let e=document.getElementById("textbox").value;const n=document;n.open(),n.write(e),n.close()}request.onupgradeneeded=function(e){db=e.target.result,db.objectStoreNames.contains("htmlFiles")||db.createObjectStore("htmlFiles")},request.onsuccess=function(e){db=e.target.result,console.log("IndexedDB is ready!"),cacheHTMLWithIndexedDB("offlinePageWithJS",html)},request.onerror=function(e){console.error("Error opening IndexedDB:",e.target.error)},window.onload=function(){if("serviceWorker"in navigator?navigator.serviceWorker.controller?console.log("Service Worker is active and controlling the page:",navigator.serviceWorker.controller):console.log("No active Service Worker controlling this page."):console.log("Service Worker is not supported in this browser."),!navigator.onLine){const e=db.transaction("htmlFiles","readonly").objectStore("htmlFiles").get("offlinePageWithJS");e.onsuccess=function(e){const n=e.target.result;if(n){document.body.innerHTML="";const e=document;e.open(),e.write(n),e.close()}else console.log("No cached HTML found.")},e.onerror=function(e){console.error("Error retrieving cached HTML:",e.target.error)}}};</script>
